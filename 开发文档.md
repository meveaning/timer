# TimerApp å¼€å‘æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

TimerAppæ˜¯ä¸€ä¸ªä¸“ä¸šçš„Macèœå•æ å®šæ—¶å™¨åº”ç”¨ï¼Œé‡‡ç”¨Swiftè¯­è¨€å¼€å‘ï¼Œç¬¦åˆApple Storeä¸Šæ¶æ ‡å‡†ã€‚

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„
```
TimerApp (macOS Application)
â”œâ”€â”€ AppDelegate (åº”ç”¨å§”æ‰˜å±‚)
â”‚   â”œâ”€â”€ èœå•æ é›†æˆ
â”‚   â”œâ”€â”€ åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
â”‚   â””â”€â”€ çŠ¶æ€æ æ›´æ–°
â”œâ”€â”€ ContentView (è§†å›¾å±‚)
â”‚   â”œâ”€â”€ ç”¨æˆ·ç•Œé¢
â”‚   â”œâ”€â”€ ç”¨æˆ·äº¤äº’
â”‚   â””â”€â”€ çŠ¶æ€ç»‘å®š
â””â”€â”€ TimerModel (æ¨¡å‹å±‚)
    â”œâ”€â”€ å®šæ—¶å™¨é€»è¾‘
    â”œâ”€â”€ éŸ³æ•ˆç®¡ç†
    â””â”€â”€ æ•°æ®æŒä¹…åŒ–
```

### æŠ€æœ¯æ ˆ
- **å¼€å‘è¯­è¨€**: Swift 5.7+
- **UIæ¡†æ¶**: SwiftUI
- **åº”ç”¨æ¡†æ¶**: AppKit
- **éŸ³é¢‘å¤„ç†**: AVFoundation
- **çŠ¶æ€ç®¡ç†**: Combine
- **æ„å»ºå·¥å…·**: Swift Package Manager

## ğŸ“ é¡¹ç›®ç»“æ„è¯¦è§£

### æºä»£ç ç»“æ„
```
Sources/
â”œâ”€â”€ AppDelegate.swift      # åº”ç”¨å§”æ‰˜å’Œèœå•æ é›†æˆ
â”œâ”€â”€ ContentView.swift      # ä¸»ç”¨æˆ·ç•Œé¢
â””â”€â”€ TimerModel.swift      # å®šæ—¶å™¨æ ¸å¿ƒé€»è¾‘
```

### é…ç½®æ–‡ä»¶
```
â”œâ”€â”€ Package.swift         # SwiftåŒ…é…ç½®
â”œâ”€â”€ Info.plist           # åº”ç”¨é…ç½®ä¿¡æ¯
â””â”€â”€ å„ç§æ„å»ºè„šæœ¬          # è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·
```

## ğŸ”§ æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 1. AppDelegate.swift

**ä¸»è¦èŒè´£**:
- åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- èœå•æ çŠ¶æ€é¡¹åˆ›å»ºå’Œç®¡ç†
- å¼¹å‡ºçª—å£æ§åˆ¶
- çŠ¶æ€æ å®æ—¶æ›´æ–°

**å…³é”®ç‰¹æ€§**:
```swift
class AppDelegate: NSObject, NSApplicationDelegate {
    var statusBarItem: NSStatusItem!     // èœå•æ é¡¹ç›®
    var popover: NSPopover!             // å¼¹å‡ºçª—å£
    var timerModel: TimerModel!         // æ•°æ®æ¨¡å‹
    
    // åº”ç”¨å¯åŠ¨é…ç½®
    func applicationDidFinishLaunching(_ aNotification: Notification)
    
    // èœå•æ äº¤äº’
    @objc func togglePopover(_ sender: AnyObject?)
    
    // çŠ¶æ€æ æ›´æ–°
    private func updateStatusBarTitle()
}
```

### 2. TimerModel.swift

**ä¸»è¦èŒè´£**:
- å®šæ—¶å™¨é€»è¾‘å®ç°
- éŸ³æ•ˆæ–‡ä»¶ç®¡ç†
- çŠ¶æ€ç®¡ç†å’Œå‘å¸ƒ
- æ•°æ®æŒä¹…åŒ–

**æ ¸å¿ƒåŠŸèƒ½**:
```swift
class TimerModel: ObservableObject {
    @Published var timeRemaining: TimeInterval    // å‰©ä½™æ—¶é—´
    @Published var isRunning: Bool                // è¿è¡ŒçŠ¶æ€
    @Published var selectedSoundURL: URL?         // éŸ³æ•ˆæ–‡ä»¶
    
    // å®šæ—¶å™¨æ§åˆ¶
    func startTimer()
    func pauseTimer()
    func resetTimer()
    
    // éŸ³æ•ˆç®¡ç†
    func selectSoundFile()
    func playAlertSound()
}
```

### 3. ContentView.swift

**ä¸»è¦èŒè´£**:
- ç”¨æˆ·ç•Œé¢å‘ˆç°
- ç”¨æˆ·äº¤äº’å¤„ç†
- çŠ¶æ€ç»‘å®šå’Œæ›´æ–°

**ç•Œé¢ç»„ä»¶**:
```swift
struct ContentView: View {
    @ObservedObject var timerModel: TimerModel
    
    var body: some View {
        VStack {
            // æ—¶é—´æ˜¾ç¤ºåŒºåŸŸ
            // é¢„è®¾æŒ‰é’®ç»„
            // è‡ªå®šä¹‰è¾“å…¥
            // éŸ³æ•ˆè®¾ç½®
            // æ§åˆ¶æŒ‰é’®
        }
    }
}
```

## ğŸ¯ è®¾è®¡æ¨¡å¼

### MVVMæ¶æ„æ¨¡å¼
```
Model (TimerModel) â†â†’ ViewModel (ObservableObject) â†â†’ View (ContentView)
```

**æ•°æ®æµ**:
1. **Modelå±‚**å¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®
2. **ViewModelå±‚**é€šè¿‡@Publishedå‘å¸ƒçŠ¶æ€å˜åŒ–
3. **Viewå±‚**é€šè¿‡@ObservedObjectç›‘å¬çŠ¶æ€æ›´æ–°

### å“åº”å¼ç¼–ç¨‹
ä½¿ç”¨Combineæ¡†æ¶å®ç°å“åº”å¼çŠ¶æ€ç®¡ç†ï¼š
```swift
timerModel.$timeRemaining
    .receive(on: RunLoop.main)
    .sink { [weak self] timeRemaining in
        self?.updateStatusBarTitle()
    }
```

## ğŸ”„ æ•°æ®æµè®¾è®¡

### çŠ¶æ€ç®¡ç†æµç¨‹
```
ç”¨æˆ·æ“ä½œ â†’ View â†’ TimerModel â†’ çŠ¶æ€æ›´æ–° â†’ Viewæ›´æ–°
```

### å®šæ—¶å™¨çŠ¶æ€æœº
```
æœªå¼€å§‹ â†’ å¯åŠ¨ â†’ è¿è¡Œä¸­ â†’ æš‚åœ â†’ ç»§ç»­ â†’ ç»“æŸ â†’ é‡ç½®
```

### éŸ³æ•ˆç®¡ç†æµç¨‹
```
é€‰æ‹©æ–‡ä»¶ â†’ éªŒè¯æ ¼å¼ â†’ ä¿å­˜è·¯å¾„ â†’ æ’­æ”¾æµ‹è¯• â†’ åº”ç”¨è®¾ç½®
```

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒé…ç½®

### ç¯å¢ƒè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: macOS 12.0+
- **å¼€å‘å·¥å…·**: Xcode 14.0+ æˆ– Swiftå‘½ä»¤è¡Œå·¥å…·
- **Swiftç‰ˆæœ¬**: 5.7+

### å¼€å‘å·¥å…·é…ç½®
```bash
# æ£€æŸ¥Swiftç‰ˆæœ¬
swift --version

# ç¼–è¯‘é¡¹ç›®
swift build

# è¿è¡Œæµ‹è¯•
swift test
```

## ğŸ“¦ æ„å»ºå’Œéƒ¨ç½²

### åº”ç”¨åŒ…æ„å»º
```bash
# ä½¿ç”¨æ„å»ºè„šæœ¬
./build-complete-app.sh

# æˆ–æ‰‹åŠ¨ç¼–è¯‘
swiftc Sources/*.swift -o TimerAppExec \
  -framework Cocoa -framework SwiftUI \
  -framework Combine -framework AVFoundation
```

### åº”ç”¨åŒ…ç»“æ„è¦æ±‚
```
TimerApp.app/
â”œâ”€â”€ Contents/
â”‚   â”œâ”€â”€ Info.plist          # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ PkgInfo             # åŒ…ç±»å‹æ ‡è¯†
â”‚   â”œâ”€â”€ MacOS/TimerApp      # å¯æ‰§è¡Œæ–‡ä»¶
â”‚   â””â”€â”€ Resources/          # èµ„æºæ–‡ä»¶
```

## ğŸ” ä»£ç è§„èŒƒ

### å‘½åè§„èŒƒ
- **ç±»å**: å¤§é©¼å³°å‘½åæ³•ï¼Œå¦‚ `TimerModel`
- **å˜é‡å**: å°é©¼å³°å‘½åæ³•ï¼Œå¦‚ `timeRemaining`
- **å‡½æ•°å**: åŠ¨è¯å¼€å¤´ï¼Œå¦‚ `startTimer()`

### ä»£ç é£æ ¼
```swift
// å¥½çš„ç¤ºä¾‹
class TimerModel: ObservableObject {
    @Published var isRunning = false
    
    func startTimer() {
        guard !isRunning else { return }
        // å®ç°é€»è¾‘
    }
}

// é¿å…çš„å†™æ³•
class timer_model {
    var is_running = false
    
    func StartTimer() {
        // ä¸ä¸€è‡´çš„å‘½å
    }
}
```

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•é‡ç‚¹
1. **å®šæ—¶å™¨é€»è¾‘æµ‹è¯•**
   - æ—¶é—´è®¡ç®—å‡†ç¡®æ€§
   - çŠ¶æ€è½¬æ¢æ­£ç¡®æ€§
   - è¾¹ç•Œæ¡ä»¶å¤„ç†

2. **éŸ³æ•ˆç®¡ç†æµ‹è¯•**
   - æ–‡ä»¶æ ¼å¼æ”¯æŒ
   - æ’­æ”¾åŠŸèƒ½æµ‹è¯•
   - é”™è¯¯å¤„ç†

3. **ç”¨æˆ·ç•Œé¢æµ‹è¯•**
   - çŠ¶æ€ç»‘å®šæ­£ç¡®æ€§
   - äº¤äº’å“åº”æµ‹è¯•

### é›†æˆæµ‹è¯•
- åº”ç”¨å¯åŠ¨æµç¨‹
- èœå•æ é›†æˆæµ‹è¯•
- å®Œæ•´åŠŸèƒ½æµç¨‹æµ‹è¯•

## ğŸ”„ ç‰ˆæœ¬ç®¡ç†

### ç‰ˆæœ¬å·è§„èŒƒ
```
ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢ç‰ˆæœ¬
1.0.0 - åˆå§‹å‘å¸ƒç‰ˆæœ¬
```

### å‘å¸ƒæµç¨‹
1. åŠŸèƒ½å¼€å‘å’Œæµ‹è¯•
2. ä»£ç å®¡æŸ¥å’Œä¼˜åŒ–
3. æ„å»ºåº”ç”¨åŒ…
4. åŠŸèƒ½éªŒè¯æµ‹è¯•
5. æ–‡æ¡£æ›´æ–°
6. æ­£å¼å‘å¸ƒ

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å†…å­˜ç®¡ç†
- åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„èµ„æº
- ä½¿ç”¨weakå¼•ç”¨é¿å…å¾ªç¯å¼•ç”¨
- åˆç†ç®¡ç†éŸ³é¢‘æ’­æ”¾å™¨å®ä¾‹

### æ€§èƒ½ç›‘æ§
- ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ
- æ£€æŸ¥CPUå ç”¨ç‡
- ä¼˜åŒ–ç•Œé¢æ¸²æŸ“æ€§èƒ½

## ğŸ”® æ‰©å±•è®¡åˆ’

### çŸ­æœŸæ‰©å±•
- [ ] å¤šå®šæ—¶å™¨æ”¯æŒ
- [ ] å®šæ—¶å™¨æ¨¡æ¿åŠŸèƒ½
- [ ] ä½¿ç”¨ç»Ÿè®¡å’Œåˆ†æ

### é•¿æœŸè§„åˆ’
- [ ] iCloudåŒæ­¥æ”¯æŒ
- [ ] å¿«æ·æŒ‡ä»¤é›†æˆ
- [ ] è·¨å¹³å°ç‰ˆæœ¬

## ğŸ“š ç›¸å…³èµ„æº

### å¼€å‘æ–‡æ¡£
- [Swiftå®˜æ–¹æ–‡æ¡£](https://swift.org/documentation/)
- [SwiftUIæ•™ç¨‹](https://developer.apple.com/tutorials/swiftui)
- [AppKitå‚è€ƒ](https://developer.apple.com/documentation/appkit)

### å·¥å…·å’Œåº“
- [Xcode](https://developer.apple.com/xcode/)
- [Swift Package Manager](https://swift.org/package-manager/)

---

**å¼€å‘å›¢é˜Ÿ**: TimerAppå¼€å‘ç»„  
**æœ€åæ›´æ–°**: 2024å¹´2æœˆ26æ—¥  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0