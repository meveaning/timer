CLAUDE.md

# Claude Code 输出规范

## 1. 语言要求
- 描述请始终使用简体中文回复。

## 2. 代码输出规范（核心：节省上下文）

### 2.1 文件操作
- **创建新文件**：仅输出**文件路径和简要说明**，不输出完整代码内容。
- **修改现有文件**：仅输出**修改的概要描述**，不输出完整 diff。
- **示例格式**：
需要创建：src/parser.py
功能：解析 zsh/bash 历史文件
关键函数：parse_zsh_history(), parse_bash_history()

text

### 2.2 代码生成
- **需要输出代码时**：仅输出**核心片段**（不超过20行），并用注释说明完整逻辑。
- **长代码模块**：用文字描述整体架构，询问是否需要输出完整代码。
- **示例格式**：
```python
# 核心逻辑：读取历史文件并解析
# 完整实现见附件或后续补充
def parse_history():
    # 主要步骤：1.打开文件 2.按行读取 3.解析格式
    pass
2.3 错误与调试
仅输出错误摘要和解决思路，不输出完整堆栈（除非特别要求）。

3. 对话管理
3.1 项目状态维护
每次回答末尾，用1-2句话总结当前进度和下一步建议。

示例：“已完成历史解析模块，下一步建议实现搜索功能。”

3.2 会话重启支持
如果检测到新会话启动，请先读取本文件，然后询问：“需要我回顾项目状态吗？我可以总结当前进度。”

4. 工具使用提示
如需执行命令，仅输出命令本身和简要说明，不输出执行结果模拟。

示例：pip install rich # 安装终端美化库

5. 元指令
如果用户说“规范模式”，请严格按照以上规则输出。

如果用户说“详细模式”，可以临时输出完整内容。

如果用户说“当前状态”，请总结项目进度和待办事项。

text

---

## 使用说明

### 保存位置
将上述内容保存到项目根目录的 `CLAUDE.md` 文件中。

### 首次激活
在 Claude Code 会话中输入：
请读取 CLAUDE.md 并遵循其中的输出规范

text

### 后续使用
- 每次新会话，AI 会自动读取并遵守规范
- 需要详细代码时说 **“详细模式”**
- 切回规范模式时说 **“规范模式”**
- 查看进度时说 **“当前状态”**

---